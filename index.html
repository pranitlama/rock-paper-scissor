<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>ROCK PAPER SCISSORS</title>

</head>
<body>
    <div class="score">
        USER <span class="userpoint"> 0</span> | <span class="computerpoint">0 </span> COMPUTER
    </div>
    <div class="image">
        <div class="user">
            <img src="/img/rockuser.png" alt="">
        </div>
        <div class="comp">
            <img src="/img/rockcomputer.png" alt="">
        </div>
    </div>

    <div class="choose">
            CHOOSE AN OPTION
    </div>
    <div class="option">
        <button type="button" id="rock">rock</button>
        <button type="button" id="paper">paper</button>
        <button type="button" id="scissor">scissor</button>
    </div>

    <div class="popup" id="popup">
        <!-- <h2>YOU WIN!!!!</h2> -->
        <button type="button" onclick="closepopup()">Play Again</button>
    </div>
    
</body>

<script>
    let upoint=0;
    let cpoint=0;
    let times;
    let popup=document.getElementById("popup");
    let winner=document.querySelector(".choose");
  
  const computer=document.querySelector(".comp img");   //select element from class .comp img
  const user=document.querySelector(".user img");
  const comppoint=document.querySelector(".computerpoint");
  const userpoint=document.querySelector(".userpoint");
  const r=document.getElementById("rock");
  const p=document.getElementById("paper");
  const s=document.getElementById("scissor");


 clearTimeout(times);
  function getcomputerchoice(){
      const choice=["rock", "paper", "scissor"];   //computer ko choice ko lagi
                let choiceno=Math.floor(Math.random()*3);  //1-3 ma random lincha
              let computerchoice=choice[choiceno];
              return choice[choiceno];
  }

  function shake(){
    computer.classList.add("shakecomp"); 
           user.classList.add("shakeuser");
            times=setTimeout(()=>{
            computer.classList.remove("shakecomp"); 
           user.classList.remove("shakeuser");
           },700);
  }
  
  function uchoice(){
      
    

  r.addEventListener("click",function(){
    result("rock");
    shake();
    
});
p.addEventListener("click",function(){
    result("paper");
    shake();
 
});
s.addEventListener("click",function(){
    result("scissor");
    shake();
  
     
});

}

function win(){
    upoint++;
    userpoint.innerHTML=upoint;
    comppoint.innerHTML=cpoint;
    announce();
}

function lose(){
    cpoint++;
    userpoint.innerHTML=upoint;
    comppoint.innerHTML=cpoint;
    announce();
}


function announce(){
    if(upoint==5)
    {
        let win=document.createElement('h2');
        win.textContent="You Win";
        popup.appendChild(win);
        openpopup();

    }
    if(cpoint==5)
    {
        let win=document.createElement('h2');
        win.textContent="You Lose";
        popup.appendChild(win);
        openpopup();
    }
}

function openpopup(){
    popup.classList.add("open-popup");
}
function closepopup(){
   
    popup.classList.remove("open-popup");
    cpoint=0;
    upoint=0;
    userpoint.innerHTML=upoint;
    comppoint.innerHTML=cpoint;

}


function result(userchoice){
    const computerchoice=getcomputerchoice();
    user.src="/img"+"/"+userchoice+"user.png";            
 computer.src="/img"+"/"+computerchoice+"computer.png";
    if(userchoice=="rock"){
            

                                if(computerchoice=="paper")
                                {
                                   lose();
                                }
                                else if(computerchoice=="scissor"){
                                     win();
                                }
                            }
                            else if(userchoice=="paper")
                            
            
                                {
                           
            
                                    if(computerchoice=="scissor")
                                {
                                   lose();
                                }
                                else if(computerchoice=="rock"){
                                    win();
                                }
                                }
                            else{
                          
            
                                    if(computerchoice=="rock")
                                {
                                   lose();
                                }
                                else if(computerchoice=="paper"){
                                   win();
                                }
                                }
}




window.onload=uchoice();







</script>
</html>